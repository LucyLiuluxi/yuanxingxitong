function mainConfig(e,t,r){r.setPrefix("shyh").setStorageType("sessionStorage"),t.otherwise("/passport/login")}function MainController(){}function AnalysisRouter(e){e.state("analysis",{url:"/analysis","abstract":!0,templateUrl:"views/_shared/content.html"}).state("analysis.rule",{url:"/rule",templateUrl:"views/analysis-rule.html",controller:"AnalysisRuleCtrl",controllerAs:"analysisRule",data:{pageTitle:"规则触发情况统计",specialClass:"sticky-header"}}).state("analysis.trade",{url:"/trade",templateUrl:"views/analysis-trade.html",controller:"AnalysisTradeCtrl",controllerAs:"analysisTrade",data:{pageTitle:"欺诈交易统计",specialClass:"sticky-header"}}).state("analysis.warning",{url:"/warning",templateUrl:"views/analysis-warning.html",controller:"AnalysisWarningCtrl",controllerAs:"analysisWarning",data:{pageTitle:"可疑警报统计",specialClass:"sticky-header"}})}function DetectRouter(e){e.state("detect",{url:"/detect","abstract":!0,templateUrl:"views/_shared/content.html"}).state("detect.detect",{url:"/",templateUrl:"views/detect.html",controller:"DetectCtrl",controllerAs:"detect",data:{pageTitle:"交易检测",specialClass:"sticky-header"}})}function GatherRouter(e){e.state("gather",{url:"/gather","abstract":!0,templateUrl:"views/_shared/content.html"}).state("gather.bank",{url:"/bank",templateUrl:"views/gather-bank.html",controller:"GatherBankCtrl",controllerAs:"gatherBank",data:{pageTitle:"数据采集 ｜ 银行业务数据",specialClass:"sticky-header"}}).state("gather.third",{url:"/third",templateUrl:"views/gather-third.html",controller:"GatherThirdCtrl",controllerAs:"gatherThird",data:{pageTitle:"数据采集 ｜ 第三方数据",specialClass:"sticky-header"}}).state("gather.table",{url:"/table",templateUrl:"views/gather-table.html",controller:"GatherTableCtrl",controllerAs:"gatherTable",data:{pageTitle:"数据采集 ｜ 业务数据表",specialClass:"sticky-header"}})}function JobRouter(e){e.state("job",{url:"/job","abstract":!0,templateUrl:"views/_shared/content.html"}).state("job.list",{url:"/list",templateUrl:"views/job-list.html",controller:"JobListCtrl",controllerAs:"jobList",data:{pageTitle:"job列表",specialClass:"sticky-header"}}).state("job.detail",{url:"/detail/{jobId}",templateUrl:"views/job-detail.html",controller:"JobDetailCtrl",controllerAs:"jobDetail",data:{pageTitle:"job详情",specialClass:"sticky-header"}})}function ListRouter(e){e.state("list",{url:"/list","abstract":!0,templateUrl:"views/_shared/content.html"}).state("list.user",{url:"/user",templateUrl:"views/user-list.html",controller:"UserListCtrl",controllerAs:"userList",data:{pageTitle:"用户名单列表",specialClass:"sticky-header"}}).state("list.ip",{url:"/ip",templateUrl:"views/ip-list.html",controller:"IpListCtrl",controllerAs:"ipList",data:{pageTitle:"IP地址名单列表",specialClass:"sticky-header"}}).state("list.phone",{url:"/phone",templateUrl:"views/phone-list.html",controller:"PhoneListCtrl",controllerAs:"phoneList",data:{pageTitle:"手机名单列表",specialClass:"sticky-header"}})}function ModelRouter(e){e.state("model",{url:"/model","abstract":!0,templateUrl:"views/_shared/content.html"}).state("model.list",{url:"/list",templateUrl:"views/model-list.html",controller:"ModelListCtrl",controllerAs:"modelList",data:{pageTitle:"模型列表",specialClass:"sticky-header"}}).state("model.detail",{url:"/detail/{modelId}",templateUrl:"views/model-detail.html",controller:"ModelDetailCtrl",controllerAs:"modelDetail",data:{pageTitle:"模型列表",specialClass:"sticky-header"}})}function passportRouter(e){e.state("passport",{"abstract":!0,url:"/passport",template:"<div ui-view></div>"}).state("passport.login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login",data:{pageTitle:"登录",specialClass:"login-body"}})}function PreviewRouter(e){e.state("preview",{url:"/preview","abstract":!0,templateUrl:"views/_shared/content.html"}).state("preview.home",{url:"/",templateUrl:"views/preview.html",controller:"PreviewCtrl",controllerAs:"preview",data:{pageTitle:"概览",specialClass:"sticky-header"}})}function ruleRouter(e){e.state("rule",{"abstract":!0,url:"/rule",templateUrl:"views/_shared/content.html"}).state("rule.list",{url:"/list",templateUrl:"views/rule-list.html",controller:"RuleListCtrl",controllerAs:"ruleList",data:{pageTitle:"规则管理",specialClass:"sticky-header"}}).state("rule.detail",{url:"/detail/{ruleId}",templateUrl:"views/rule-detail.html",controller:"RuleDetailCtrl",controllerAs:"ruleDetail",data:{pageTitle:"规则详情",specialClass:"sticky-header"}})}function SimulateRouter(e){e.state("simulate",{url:"/simulate","abstract":!0,templateUrl:"views/_shared/content.html"}).state("simulate.add",{url:"/add",templateUrl:"views/simulate.html",controller:"SimulateCtrl",controllerAs:"simulate",data:{pageTitle:"数据模拟",specialClass:"sticky-header"}})}function WarningRouter(e){e.state("warning",{url:"/warning","abstract":!0,templateUrl:"views/_shared/content.html"}).state("warning.list",{url:"/list",templateUrl:"views/warning.html",controller:"WarningListCtrl",controllerAs:"warningList",data:{pageTitle:"警报展示",specialClass:"sticky-header"}})}function TopNavBarCtrl(e,t,r){function a(){r.logout().success(function(r){0===r.status?e.$state.go("passport.login"):t.error(error.msg)}).error(function(e){t.error(e.msg)})}var o=this;o.logout=a}function NavigationCtrl(e,t,r){function a(){function e(){jQuery(".menu-list").each(function(){var e=jQuery(this);e.hasClass("nav-active")&&e.find("> ul").slideUp(200,function(){e.removeClass("nav-active")})})}function t(){var e=jQuery(document).height();e>jQuery(".main-content").height()&&jQuery(".main-content").height(e)}$("html").niceScroll({styler:"fb",cursorcolor:"#65cea7",cursorwidth:"6",cursorborderradius:"0px",background:"#424f63",spacebarenabled:!1,cursorborder:"0",zindex:"1000"}),$(".left-side").niceScroll({styler:"fb",cursorcolor:"#65cea7",cursorwidth:"3",cursorborderradius:"0px",background:"#424f63",spacebarenabled:!1,cursorborder:"0"}),$(".left-side").getNiceScroll(),$("body").hasClass("left-side-collapsed")&&$(".left-side").getNiceScroll().hide(),jQuery(".menu-list > a").click(function(){var r=jQuery(this).parent(),a=r.find("> ul");return jQuery("body").hasClass("left-side-collapsed")||(a.is(":visible")?a.slideUp(200,function(){r.removeClass("nav-active"),jQuery(".main-content").css({height:""}),t()}):(e(),r.addClass("nav-active"),a.slideDown(200,function(){t()}))),!1}),jQuery(".custom-nav > li").hover(function(){jQuery(this).addClass("nav-hover")},function(){jQuery(this).removeClass("nav-hover")}),jQuery(".toggle-btn").click(function(){$(".left-side").getNiceScroll().hide(),$("body").hasClass("left-side-collapsed")&&$(".left-side").getNiceScroll().hide();var e=jQuery("body"),r=e.css("position");"relative"!=r?e.hasClass("left-side-collapsed")?(e.removeClass("left-side-collapsed chat-view"),jQuery(".custom-nav li.active ul").css({display:"block"}),jQuery(this).removeClass("menu-collapsed")):(e.addClass("left-side-collapsed"),jQuery(".custom-nav ul").attr("style",""),jQuery(this).addClass("menu-collapsed")):(e.hasClass("left-side-show")?e.removeClass("left-side-show"):e.addClass("left-side-show"),t())})}function o(){t.logout().success(function(t){0===t.status?e.$state.go("passport.login"):r.error(error.msg)}).error(function(e){r.error(e.msg)})}var n=this;n.logout=o,a()}function DetectCtrl(e,t,r){function a(){$(".detect-model").hide(),t.detectTrade().success(function(e){0==e.status?n.fraudList=e.data:r.error(e.msg)}).error(function(e){r.error(e.msg)})}function o(){$(".detect-model").hide()}var n=this;n.fraudList=[],n.showInPage=a,n.importExcel=o,e.uploadImage=function(){$(".detect-model").show()}}function JobDetailCtrl(e,t,r){function a(){t.getDetail(o.jobId).success(function(e){if(0===e.status){var t=e.data;o.jobName=t.job,o.createdAt=t.created_at,o.status=t.status,o.beganAt=t.began_at,o.endedAt=t.ended_at,o.dataset=t.dataset,o.model=t.model}else r.error(e.msg)}).error(function(e){r.success(e.msg)})}var o=this;o.jobId=e.jobId,o.jobName="",o.createdAt="",o.status="",o.beganAt="",o.endedAt="",o.dataset=null,o.model=null,a()}function JobListCtrl(e,t,r){function a(){o(),n()}function o(){$(".default-date-picker").datepicker({format:"yyyy-mm-dd"});var e=$(".dpd1").datepicker({format:"yyyy-mm-dd",onRender:function(e){return e.valueOf()<now.valueOf()?"disabled":""}}).on("changeDate",function(r){if(r.date.valueOf()>t.date.valueOf()){var a=new Date(r.date);a.setDate(a.getDate()+1),t.setValue(a)}e.hide(),$(".dpd2")[0].focus()}).data("datepicker"),t=$(".dpd2").datepicker({format:"yyyy-mm-dd",onRender:function(t){return t.valueOf()<=e.date.valueOf()?"disabled":""}}).on("changeDate",function(e){t.hide()}).data("datepicker")}function n(){t.list().success(function(e){0===e.status?i.jobList=e.data:r.error(e.msg)})}function l(){i.beganAt=$(".default-date-picker").val(),i.dataset={began_at:$(".dpd1").val(),ended_at:$(".dpd2").val()},i.dataset=JSON.stringify(i.dataset),t.add(i).success(function(e){0===e.status?(i.modelId="",i.beganAt="",$(".dpd1").val(""),$(".dpd2").val(""),i.addPanelFlag=!1,n()):r.error(e.msg)})}function s(t){e.$state.go("job.detail",{jobId:t})}var i=this;i.modelId="",i.beganAt="",i.dataset={began_at:"",ended_at:""},i.jobList=null,i.addPanelFlag=!1,i.page=1,i.pageSize=10,i.total=50,i.submit=l,i.gotoDetail=s,i.refreshJobList=n,a()}function IpListCtrl(e,t){function r(){e.getIpList(u).success(function(e){0===e.status?(u.ipList=e.data.list,u.total=e.data.total):t.error(e.msg)}).error(function(e){t.error(e.msg)})}function a(){""==u.ipId?o():n()}function o(){e.addIp(u).success(function(e){0===e.status?(t.success("添加成功"),i(),r()):t.error(e.msg)}).error(function(e){t.error(e.msg)})}function n(){e.modifyIp(u).success(function(e){0===e.status?(t.success("添加成功"),i(),r()):t.error(e.msg)}).error(function(e){t.error(e.msg)})}function l(e){u.addPanelFlag=!0,u.ipId=e.id,u.ipData=e.ip,u.safety=e.safety}function s(a){e.deleteIp(a).success(function(e){0===e.status?(t.success("删除成功"),r()):t.error(e.msg)}).error(function(e){t.error(e.msg)})}function i(){u.addPanelFlag=!1,u.ipData="",u.safety="",u.ipId=""}var u=this;u.addPanelFlag=!1,u.total=0,u.page=1,u.pageSize=10,u.ipId="",u.ipData="",u.safety="",u.ipList=null,u.refreshIpList=r,u.submit=a,u.deleteIp=s,u.modify=l,r()}function PhoneListCtrl(e,t){function r(){e.getPhoneList(u).success(function(e){0===e.status?(u.phoneList=e.data.list,u.total=e.data.total):t.error(e.msg)}).error(function(e){t.error(e.msg)})}function a(){""==u.phoneId?o():n()}function o(){e.addPhone(u).success(function(e){0===e.status?(t.success("添加成功"),i(),r()):t.error(e.msg)}).error(function(e){t.error(e.msg)})}function n(){e.modifyPhone(u).success(function(e){0===e.status?(t.success("添加成功"),i(),r()):t.error(e.msg)}).error(function(e){t.error(e.msg)})}function l(e){u.addPanelFlag=!0,u.phoneId=e.id,u.phone=e.phoneNumber,u.safety=e.safety}function s(a){e.deletePhone(a).success(function(e){0===e.status?(t.success("删除成功"),r()):t.error(e.msg)}).error(function(e){t.error(e.msg)})}function i(){u.addPanelFlag=!1,u.phoneId="",u.phone="",u.safety=""}var u=this;u.addPanelFlag=!1,u.total=0,u.page=1,u.pageSize=10,u.phoneId="",u.phone="",u.safety="",u.phoneList=null,u.refreshPhoneList=r,u.submit=a,u.deletePhone=s,u.modify=l,r()}function UserListCtrl(e,t){function r(){e.getUserList(l).success(function(e){0===e.status?(l.userList=e.data.list,l.total=e.data.total):t.error(e.msg)}).error(function(e){t.error(e.msg)})}function a(){return""==l.userType?void t.error("请选择用户类型"):void e.modifyUser(l).success(function(e){0===e.status?(t.success("添加成功"),n(),r()):t.error(e.msg)}).error(function(e){t.error(e.msg)})}function o(e){l.addPanelFlag=!0,l.userId=e.id,l.name=e.username,l.userType=e.usertype+""}function n(){l.addPanelFlag=!1,l.userId="",l.name="",l.userType=""}var l=this;l.addPanelFlag=!1,l.total=0,l.page=1,l.pageSize=10,l.userId="",l.name="",l.userType="",l.userList=null,l.refreshUserList=r,l.modify=o,l.submit=a,r()}function ModelDetailCtrl(e,t,r){function a(){t.getDetail(o.modelId).success(function(e){if(0===e.status){var t=e.data;o.modelName=t.model,o.createdAt=t.created_at,o.status=t.status,o.templateName=t.template_name,o.parameters=t.parameters,o.trainingHistory=t.training_history}else r.error(e.msg)}).error(function(e){r.success(e.msg)})}var o=this;o.modelId=e.modelId,o.modelName="",o.createdAt="",o.status="",o.templateName="",o.parameters=null,o.trainingHistory=null,a()}function ModelListCtrl(e,t,r){function a(){t.list().success(function(e){0===e.status?s.modelList=e.data:r.error(e.msg)})}function o(){return""===s.modelName?void r.error("模型名称不能为空"):""===s.templateId?void r.error("请选择模型"):void t.add(s).success(function(e){0===e.status?(s.modelName="",s.templateId="",s.addPanelFlag=!1,s.modelList.push(e.data)):r.error(e.msg)})}function n(e){s.modelList.splice(e-1,1)}function l(t){e.$state.go("model.detail",{modelId:t})}var s=this;s.modelName="",s.templateId="",s.modelList=null,s.addPanelFlag=!1,s.page=1,s.pageSize=10,s.totalModels=50,s.submit=o,s.del=n,s.gotoDetail=l,s.refreshModelList=a,a()}function PreviewCtrl(){}function RuleDetailCtrl(e,t,r){function a(){t.getDetail(o.ruleId).success(function(e){if(0===e.status){var t=e.data;o.ruleName=t.bankRule.rulename,o.frequency=t.bankRule.frequency,o.type=t.bankRule.type,o.safeLevel=t.bankRule.safeLevel,o.ruleFactor=t.ruleFactor}else r.error(e.msg)}).error(function(e){r.error(e.msg)})}var o=this;o.ruleId=e.ruleId,o.ruleName="",o.frequency="",o.type="",o.safeLevel="",o.ruleFactor=null,a()}function RuleListCtrl(e,t,r){function a(){t.list(f).success(function(e){0===e.status?(f.ruleList=e.data.list,angular.forEach(f.ruleList,function(e){e.ruledesc=JSON.parse(e.ruledesc),e.ruledesc.isCommonFromPlace=e.ruledesc.isCommonFromPlace?1:0}),console.log(f.ruleList),f.total=e.data.total):r.error(e.msg)}).error(function(e){r.error(e.msg)})}function o(){f.ruleId?s():l()}function n(e){f.addPanelFlag=!0,f.ruleId=e.id,f.ruleName=e.rulename,f.type=e.type,f.safeLevel=e.safeLevel,f.time=e.ruledesc.time,f.deals=e.ruledesc.deals,f.isCommonFromPlace=e.ruledesc.isCommonFromPlace+""}function l(){t.add(f).success(function(e){0===e.status?(f.addPanelFlag=!1,c(),r.success("添加成功"),a()):r.error(e.msg)}).error(function(e){r.error(e.msg)})}function s(){t.modify(f).success(function(e){0===e.status?(f.addPanelFlag=!1,c(),r.success("修改成功"),a()):r.error(e.msg)}).error(function(e){r.error(e.msg)})}function i(e){t.del(e).success(function(e){0===e.status?(r.success("删除成功"),a()):r.error(e.msg)}).error(function(e){r.error(e.msg)})}function u(t){e.$state.go("rule.detail",{ruleId:t})}function c(){f.ruleId="",f.ruleName="",f.type="",f.safeLevel="",f.time="",f.deals="",f.isCommonFromPlace=""}function d(){f.extraConditionList.push({attribute:"",operator:"",threshold:""})}function m(e){f.extraConditionList.splice(e,1)}var f=this;f.addPanelFlag=!1,f.ruleList=null,f.ruleId="",f.ruleName="",f.type="",f.safeLevel="",f.time="",f.deals="",f.isCommonFromPlace="",f.page=1,f.pageSize=10,f.total=0,f.extraConditionList=[],f.refreshRuleList=a,f.submit=o,f.modify=n,f.del=i,f.goToDetail=u,f.addCondition=d,f.deleteCondition=m,a()}function SimulateCtrl(e,t){function r(){a()}function a(){$(".form_datetime").datetimepicker({format:"yyyy-mm-dd hh:ii:ss"}),$(".default-date-picker").datepicker({format:"yyyy-mm-dd"});var e=$(".dpd1").datepicker({format:"yyyy-mm-dd",onRender:function(e){return e.valueOf()<now.valueOf()?"disabled":""}}).on("changeDate",function(r){if(r.date.valueOf()>t.date.valueOf()){var a=new Date(r.date);a.setDate(a.getDate()+1),t.setValue(a)}e.hide(),$(".dpd2")[0].focus()}).data("datepicker"),t=$(".dpd2").datepicker({format:"yyyy-mm-dd",onRender:function(t){return t.valueOf()<=e.date.valueOf()?"disabled":""}}).on("changeDate",function(e){t.hide()}).data("datepicker")}function o(){return console.log(p),""===p.timeFrom||""===p.timeTo||""===p.moneyFrom||""===p.moneyTo||""===p.city||""===p.amount?void t.error("输入有误"):void e.addNormal(p).success(function(e){0===e.status&&t.success("添加成功")}).error(function(e){t.error(e.msg)})}function n(){return console.log(p),""===p.fraudNumIdFrom||""===p.fraudNumIdTo1||""===p.fraudNumIdTo2||""===p.fraudTimeFrom||""===p.fraudTimeTo||""===p.fraudMoneyFrom||""===p.fraudMoneyTo||""===p.fraudNumCity||""===p.timeRange||""===p.timeType||""===p.percent?void t.error("输入有误"):void e.addFraud(p).success(function(e){0===e.status&&t.success("添加成功")}).error(function(e){t.error(e.msg)})}function l(){p.timeFrom="",p.timeTo="",p.moneyFrom="",p.moneyTo="",p.city="",p.amount="",p.channel="",p.serviceType="",p.ip="",p.state="",p.authMode="",p.terminalNumber=""}function s(){p.fraudNumIdFrom="",p.fraudNumIdTo1="",p.fraudNumIdTo2="",p.fraudTimeFrom="",p.fraudTimeTo="",p.fraudMoneyFrom="",p.fraudMoneyTo="",p.fraudNumCity="",p.timeRange="",p.timeType="",p.percent="",p.fraudChannel="",p.fraudServiceType="",p.fraudIp="",p.fraudState="",p.fraudAuthMode="",p.fraudTerminalNumber="",p.fraudMac=""}function i(){p.channel="",p.fraudChannel=""}function u(){p.serviceType="",p.fraudServiceType=""}function c(){p.ip="",p.fraudIp=""}function d(){p.state="",p.fraudState=""}function m(){p.authMode="",p.fraudAuthMode=""}function f(){p.terminalNumber="",p.fraudTerminalNumber=""}var p=this;p.timeFrom="",p.timeTo="",p.moneyFrom="",p.moneyTo="",p.city="",p.amount="",p.channel="",p.serviceType="",p.ip="",p.state="",p.authMode="",p.terminalNumber="",p.mac="",p.addNormalPanelFlag=!0,p.addFraudPanelFlag=!1,p.addRulePanelFlag=!1,p.fraudNumIdFrom="",p.fraudNumIdTo1="",p.fraudNumIdTo2="",p.fraudTimeFrom="",p.fraudTimeTo="",p.fraudMoneyFrom="",p.fraudMoneyTo="",p.fraudNumCity="",p.timeRange="",p.timeType="",p.percent="",p.fraudChannel="",p.fraudServiceType="",p.fraudIp="",p.fraudState="",p.fraudAuthMode="",p.fraudTerminalNumber="",p.fraudMac="",p.submitNormal=o,p.submitFraud=n,p.clearNormal=l,p.clearFraud=s,p.clearChannel=i,p.clearSt=u,p.clearIp=c,p.clearState=d,p.clearAm=m,p.clearTn=f,r()}function WarningListCtrl(e,t){function r(){e.list(a).success(function(e){0===e.status?(a.warningList=e.data.list,a.total=e.data.total):t.error(e.msg)}).error(function(e){t.error(e.msg)})}var a=this;a.warningList=null,a.page=1,a.pageSize=20,a.total=0,a.safety=0,a.safeAction=5,r()}function AnalysisTradeCtrl(e,t){function r(){e.getTrade().success(function(e){0===e.status?a.ruleList=e.data.data:t.error(e.msg)}).error(function(e){t.error(e.msg)})}var a=this;a.ruleList=null,r()}function AnalysisRuleCtrl(e,t){function r(){e.getRule().success(function(e){0===e.status?a.ruleList=e.data.rules:t.error(e.msg)}).error(function(e){t.error(e.msg)})}var a=this;a.ruleList=null,r()}function AnalysisWarningCtrl(e,t){function r(){e.getTrade().success(function(e){0===e.status?a.ruleList=e.data.data:t.error(e.msg)}).error(function(e){t.error(e.msg)})}var a=this;a.ruleList=null,r()}function GatherBankCtrl(e,t){function r(){e.getBank(a).success(function(e){0===e.status?(a.total=e.data.total,a.dataList=e.data.list):t.error(e.msg)}).error(function(e){t.error(e.msg)})}var a=this;a.dataList=null,a.page=1,a.pageSize=20,a.total=0,a.refreshDataList=r,r()}function GatherTableCtrl(){var e=this;e.tableList=[{name:"cash_business",detail:"现金业务"},{name:"transfer_business",detail:"转账业务"},{name:"currency_exchange_business",detail:"汇兑业务"},{name:"bank_drafts",detail:"银行汇票业务"},{name:"deposit_sys",detail:"存款系统"},{name:"loans_sys",detail:"贷款系统"},{name:"trade_finance_sys",detail:"贸易融资系统"},{name:"central_liability_sys",detail:"中心债务系统"},{name:"factoring_business",detail:"保理业务"},{name:"finance_business",detail:"融资业务"}]}function GatherThirdCtrl(e,t){function r(){e.getThird(a).success(function(e){0===e.status?(a.total=e.data.total,a.dataList=e.data.list):t.error(e.msg)}).error(function(e){t.error(e.msg)})}var a=this;a.dataList=null,a.page=1,a.pageSize=20,a.total=0,a.refreshDataList=r,r()}function LoginCtrl(e,t,r){function a(){t.login(o).success(function(t){0===t.status?e.$state.go("preview.home"):r.error(t.msg)})}var o=this;o.username="",o.password="",o.submit=a}function Ajax(e,t){function r(r,a){return t.post(l+r,n(a),{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(t){1001===t.status&&e.$state.go("passport.login")})}function a(e,r){return t.get(l+e,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}function o(e){return t["delete"](l+e,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}function n(e){var t=[];for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}var l="/ajax";return{doPost:r,doGet:a,doDelete:o}}function AlertBox(e){function t(t){$(".J_success").show().find("span").text(t),e(function(){$(".J_success").hide()},2e3)}function r(t){$(".J_error").show().find("span").text(t),e(function(){$(".J_error").hide()},2e3)}return{success:t,error:r}}function Analysis(e){function t(){return e.doGet("/statistic/rule")}function r(){return e.doGet("/statistic/fraud")}function a(){return e.doGet("/statistic/warning")}return{getRule:t,getTrade:r,getWarning:a}}function Detect(e){function t(){return e.doPost("/check/importdata",{})}return{detectTrade:t}}function Gather(e){function t(t){return e.doGet("/data/bank?page="+t.page+"&pageSize="+t.pageSize)}function r(t){return e.doGet("/data/otherbank?page="+t.page+"&pageSize="+t.pageSize)}return{getBank:t,getThird:r}}function Job(e){function t(){return e.doGet("/models/jobs")}function r(t){return e.doPost("/models/jobs",{model_id:t.modelId,began_at:t.beganAt,dataset:t.dataset})}function a(t){return e.doGet("/models/jobs/"+t)}return{list:t,add:r,getDetail:a}}function List(e){function t(t){return e.doPost("/usershow",{page:t.page,pageSize:t.pageSize})}function r(t){return e.doPost("/usermanage/"+t.userId,{id:t.userId,usertype:t.userType})}function a(t){return e.doPost("/ipshow",{page:t.page,pageSize:t.pageSize})}function o(t){return e.doPost("/ipmanage/"+t.ipId,{id:t.ipId,safety:t.safety})}function n(t){return e.doPost("/ipmanage",{ipdata:t.ipData,safety:t.safety})}function l(t){return e.doDelete("/ipmanage/"+t,{id:t})}function s(t){return e.doPost("/phoneshow",{page:t.page,pageSize:t.pageSize})}function i(t){return e.doPost("/phonemanage/"+t.phoneId,{id:t.phoneId,safety:t.safety})}function u(t){return e.doPost("/phonemanage",{phonenumber:t.phone,safety:t.safety})}function c(t){return e.doDelete("/phonemanage/"+t,{id:t})}return{getUserList:t,modifyUser:r,getIpList:a,modifyIp:o,addIp:n,deleteIp:l,getPhoneList:s,modifyPhone:i,addPhone:u,deletePhone:c}}function Model(e){function t(){return e.doGet("/models")}function r(t){return e.doPost("/models",{model:t.modelName,template_id:t.templateId})}function a(t){return e.doGet("/models/"+t)}function o(t){return e.doDelete("/models/"+t)}return{list:t,add:r,getDetail:a,del:o}}function Passport(e){function t(t){return e.doPost("/login",{username:t.username,password:t.password})}function r(){return e.doGet("/logout",{})}return{login:t,logout:r}}function Rule(e){function t(t){return e.doGet("/rules?page="+t.page+"&pageSize="+t.pageSize)}function r(t){return e.doPost("/rules",{rulename:t.ruleName,type:t.type,safeLevel:t.safeLevel,time:t.time,deals:t.deals,isCommonFromPlace:!!t.isCommonFromPlace})}function a(t){return e.doGet("/rules/"+t)}function o(t){return e.doPost("/rules/"+t.ruleId,{id:t.ruleId,rulename:t.ruleName,type:t.type,safeLevel:t.safeLevel,time:t.time,deals:t.deals,isCommonFromPlace:!!t.isCommonFromPlace})}function n(t){return e.doDelete("/rules/"+t)}return{list:t,add:r,getDetail:a,modify:o,del:n}}function Simulate(e){function t(t){return e.doPost("/simulateNormal",{timeFrom:t.timeFrom,timeTo:t.timeTo,moneyFrom:t.moneyFrom,moneyTo:t.moneyTo,city:t.city,amount:t.amount,channel:t.channel,serviceType:t.serviceType,IP:t.ip,state:t.state,authMode:t.authMode,terminalNumber:t.terminalNumber,mac:t.mac})}function r(t){return e.doPost("/simulateFraud",{fraudNumIdFrom:t.fraudNumIdFrom,fraudNumIdTo1:t.fraudNumIdTo1,fraudNumIdTo2:t.fraudNumIdTo2,fraudTimeFrom:t.fraudTimeFrom,fraudTimeTo:t.fraudTimeTo,fraudMoneyFrom:t.fraudMoneyFrom,fraudMoneyTo:t.fraudMoneyTo,fraudNumCity:t.fraudNumCity,timeRange:t.timeRange,timeType:t.timeType,percent:t.percent,fraudChannel:t.fraudChannel,fraudServiceType:t.fraudServiceType,fraudIp:t.fraudIp,fraudState:t.fraudState,fraudAuthMode:t.fraudAuthMode,fraudTerminalNumber:t.fraudTerminalNumber,fraudMac:t.fraudMac})}return{addNormal:t,addFraud:r}}function Warning(e){function t(t){return e.doPost("/datashow",{page:t.page,pageSize:t.pageSize,safety:t.safety,safe_action:t.safeAction,moneyint:0})}return{list:t}}function landingScrollspy(){return{restrict:"A",link:function(e,t,r){t.scrollspy({target:".navbar-fixed-top",offset:80})}}}function pageTitle(e,t){return{link:function(r,a){var o=function(e,r,o,n,l){var s="上海银行 ｜ 交易监控平台";r.data&&r.data.pageTitle&&(s="上海银行 | "+r.data.pageTitle),t(function(){a.text(s)})};e.$on("$stateChangeStart",o)}}}function fromBankFilter(){var e=function(e){switch(e){case 1:return"支付宝";case 2:return"微信";case 3:return"淘宝";case 4:return"京东";default:return"出错"}};return e}function userTypeFilter(){var e=function(e){switch(e){case 0:return"黑名单";case 1:return"白名单";case 2:return"灰名单";case 3:return"高风险帐号";default:return"出错"}};return e}!function(){function e(e){e.expires=18e5}angular.module("shyh",["ui.router","oc.lazyLoad","ui.bootstrap","pascalprecht.translate","ngIdle","ngSanitize","ngCookies","LocalStorageModule"]).config(e).constant("QINIU_DOMAIN",""),e.$inject=["$cookiesProvider"]}(),angular.module("shyh").config(mainConfig),mainConfig.$inject=["$stateProvider","$urlRouterProvider","localStorageServiceProvider"],angular.module("shyh").run(["$rootScope","$state",function(e,t){e.$state=t}]),angular.module("shyh").controller("MainController",MainController).controller("NavigationCtrl",NavigationCtrl),MainController.$inject=[],angular.module("shyh").factory("Ajax",Ajax).factory("AlertBox",AlertBox),angular.module("shyh").directive("pageTitle",pageTitle).directive("landingScrollspy",landingScrollspy),angular.module("shyh").filter("userTypeFilter",userTypeFilter).filter("fromBankFilter",fromBankFilter),angular.module("shyh").config(AnalysisRouter).controller("AnalysisRuleCtrl",AnalysisRuleCtrl).controller("AnalysisTradeCtrl",AnalysisTradeCtrl).controller("AnalysisWarningCtrl",AnalysisWarningCtrl).factory("Analysis",Analysis),angular.module("shyh").config(DetectRouter).controller("DetectCtrl",DetectCtrl).factory("Detect",Detect),angular.module("shyh").config(GatherRouter).controller("GatherBankCtrl",GatherBankCtrl).controller("GatherThirdCtrl",GatherThirdCtrl).controller("GatherTableCtrl",GatherTableCtrl).factory("Gather",Gather),angular.module("shyh").config(JobRouter).controller("JobListCtrl",JobListCtrl).controller("JobDetailCtrl",JobDetailCtrl).factory("Job",Job),angular.module("shyh").config(ListRouter).controller("UserListCtrl",UserListCtrl).controller("IpListCtrl",IpListCtrl).controller("PhoneListCtrl",PhoneListCtrl).factory("List",List),angular.module("shyh").config(ModelRouter).controller("ModelListCtrl",ModelListCtrl).controller("ModelDetailCtrl",ModelDetailCtrl).factory("Model",Model),angular.module("shyh").config(passportRouter).controller("LoginCtrl",LoginCtrl).factory("Passport",Passport),angular.module("shyh").config(PreviewRouter).controller("PreviewCtrl",PreviewCtrl),angular.module("shyh").config(ruleRouter).factory("Rule",Rule).controller("RuleListCtrl",RuleListCtrl).controller("RuleDetailCtrl",RuleDetailCtrl),angular.module("shyh").config(SimulateRouter).controller("SimulateCtrl",SimulateCtrl).factory("Simulate",Simulate),angular.module("shyh").config(WarningRouter).controller("WarningListCtrl",WarningListCtrl).factory("Warning",Warning),AnalysisRouter.$inject=["$stateProvider"],DetectRouter.$inject=["$stateProvider"],GatherRouter.$inject=["$stateProvider"],JobRouter.$inject=["$stateProvider"],ListRouter.$inject=["$stateProvider"],ModelRouter.$inject=["$stateProvider"],passportRouter.$inject=["$stateProvider"],PreviewRouter.$inject=["$stateProvider"],ruleRouter.$inject=["$stateProvider"],SimulateRouter.$inject=["$stateProvider"],WarningRouter.$inject=["$stateProvider"],angular.module("shyh").controller("TopNavBarCtrl",TopNavBarCtrl),TopNavBarCtrl.$inject=["$rootScope","AlertBox","Passport"],NavigationCtrl.$inject=["$rootScope","Passport","AlertBox"],DetectCtrl.$inject=["$scope","Detect","AlertBox"],JobDetailCtrl.$inject=["$stateParams","Job","AlertBox"],JobListCtrl.$inject=["$rootScope","Job","AlertBox"],IpListCtrl.$inject=["List","AlertBox"],PhoneListCtrl.$inject=["List","AlertBox"],UserListCtrl.$inject=["List","AlertBox"],ModelDetailCtrl.$inject=["$stateParams","Model","AlertBox"],ModelListCtrl.$inject=["$rootScope","Model","AlertBox"],PreviewCtrl.$inject=[],RuleDetailCtrl.$inject=["$stateParams","Rule","AlertBox"],RuleListCtrl.$inject=["$rootScope","Rule","AlertBox"],SimulateCtrl.$inject=["Simulate","AlertBox"],WarningListCtrl.$inject=["Warning","AlertBox"],AnalysisTradeCtrl.$inject=["Analysis","AlertBox"],AnalysisRuleCtrl.$inject=["Analysis","AlertBox"],AnalysisWarningCtrl.$inject=["Analysis","AlertBox"],GatherBankCtrl.$inject=["Gather","AlertBox"],GatherTableCtrl.$inject=[],GatherThirdCtrl.$inject=["Gather","AlertBox"],LoginCtrl.$inject=["$rootScope","Passport","AlertBox"],Ajax.$inject=["$rootScope","$http"],AlertBox.$inject=["$timeout"],Analysis.$inject=["Ajax"],Detect.$inject=["Ajax"],Gather.$inject=["Ajax"],Job.$inject=["Ajax"],List.$inject=["Ajax"],Model.$inject=["Ajax"],Passport.$inject=["Ajax"],Rule.$inject=["Ajax"],Simulate.$inject=["Ajax"],Warning.$inject=["Ajax"],angular.module("shyh").directive("landingScrollspy",landingScrollspy),angular.module("shyh").directive("pageTitle",pageTitle),fromBankFilter.$inject=[],userTypeFilter.$inject=[];